<ci:SettingsPageBase x:Class="ClassIsland.Views.SettingPages.ManagementCredentialsSettingsPage"
      xmlns="https://github.com/avaloniaui"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ClassIsland.Views.SettingPages"
      xmlns:ci="http://classisland.tech/schemas/xaml/core"
      xmlns:converters="clr-namespace:ClassIsland.Converters"
      xmlns:controls="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Loaded="ManagementCredentialsSettingsPage_OnLoaded"
      Unloaded="ManagementCredentialsSettingsPage_OnUnloaded"
      d:DataContext="{d:DesignInstance local:ManagementCredentialsSettingsPage}">

    <ci:SettingsPageBase.Resources>
        <converters:AuthLevelToIntConverter x:Key="AuthLevelToIntConverter" />
    </ci:SettingsPageBase.Resources>
    <ScrollViewer>
        <StackPanel Classes="settings-container animated-intro" 
                    IsEnabled="{Binding ViewModel.IsLocked, Converter={StaticResource InvertBooleanConverter}}">
            <ci:IconText Glyph="&#xeaf2;" Text="认证" Margin="0 0 0 8" />
            <!-- 用户认证方式 -->
            <controls:SettingsExpander IconSource="{ci:FluentIconSource &#xece5;}"
                                       Header="用户认证方式"
                                       Description="设置用户授权等级的认证方式。">
                <controls:SettingsExpander.Footer>
                    <ci:CredentialEditControl CredentialString="{Binding ManagementService.CredentialConfig.UserCredential, Mode=TwoWay}"/>
                </controls:SettingsExpander.Footer>
            </controls:SettingsExpander>
            <!-- 管理员认证方式 -->
            <controls:SettingsExpander IconSource="{ci:FluentIconSource &#xed43;}"
                                       Header="管理员认证方式"
                                       Description="设置管理员授权等级的认证方式。">
                <controls:SettingsExpander.Footer>
                    <ci:CredentialEditControl CredentialString="{Binding ManagementService.CredentialConfig.AdminCredential, Mode=TwoWay}"/>
                </controls:SettingsExpander.Footer>
            </controls:SettingsExpander>

            <Separator Margin="0 12 0 8" />
            <ci:IconText Glyph="&#xe350;" Text="操作授权等级" Margin="0 0 0 4" />

            <Grid>
                <ci:IconText Glyph="&#xe350;" Text="编辑授权设置" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.EditAuthorizeSettingsAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xe2b4;" Text="编辑策略" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.EditPolicyAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xe2b8;" Text="退出集控" HorizontalAlignment="Left" VerticalAlignment="Center" />
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.ExitManagementAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xe6bb;" Text="编辑课表" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.EditProfileAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xef27;" Text="编辑应用设置" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.EditSettingsAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xe15f;" Text="换课" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.ChangeLessonsAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
            <Grid>
                <ci:IconText Glyph="&#xe0df;" Text="退出应用" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                <ComboBox HorizontalAlignment="Right" VerticalAlignment="Center" SelectedIndex="{Binding ManagementService.CredentialConfig.ExitApplicationAuthorizeLevel, Converter={StaticResource AuthLevelToIntConverter}}">
                    <ComboBoxItem>无</ComboBoxItem>
                    <ComboBoxItem>用户</ComboBoxItem>
                    <ComboBoxItem>管理员</ComboBoxItem>
                </ComboBox>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</ci:SettingsPageBase>
